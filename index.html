<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>joshthedev888.github.io</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    animation: {
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 6s ease-in-out infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        .custom-scroll::-webkit-scrollbar { width: 6px; }
        .custom-scroll::-webkit-scrollbar-track { background: rgba(0,0,0,0.05); }
        .custom-scroll::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.2); border-radius: 10px; }
        .custom-scroll::-webkit-scrollbar-thumb:hover { background: rgba(0,0,0,0.3); }

        .bg-animated {
            background: radial-gradient(circle at 50% 50%, #f8fafc 0%, #e2e8f0 100%);
        }
        
        .glass-panel {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 10px 40px -10px rgba(0,0,0,0.05);
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.6);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.02);
        }
        .glass-card:hover {
            background: rgba(255, 255, 255, 0.95);
            border-color: rgba(99, 102, 241, 0.3);
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(99, 102, 241, 0.15), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 min-h-screen flex flex-col font-sans bg-animated relative overflow-x-hidden">
    
    <div class="fixed top-0 left-0 w-full h-full overflow-hidden -z-10 pointer-events-none opacity-60">
        <div class="absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-indigo-300/30 rounded-full blur-[100px] animate-pulse-slow"></div>
        <div class="absolute bottom-[-10%] right-[-10%] w-[600px] h-[600px] bg-purple-300/30 rounded-full blur-[100px] animate-pulse-slow" style="animation-delay: 2s;"></div>
    </div>
    
    <main class="flex-grow container mx-auto px-4 py-6 max-w-5xl flex flex-col gap-5 min-h-screen">
        
        <header class="flex flex-col items-center justify-center py-2 animate-[fadeIn_0.5s_ease-out]">
            <h1 class="text-3xl md:text-4xl font-extrabold tracking-tighter text-slate-800">
                joshthedev888<span class="text-indigo-600">.github.io</span>
            </h1>
        </header>

        <section class="flex-grow flex flex-col glass-panel rounded-3xl overflow-hidden relative shadow-2xl shadow-indigo-100">
            
            <div class="p-4 border-b border-slate-200/50 flex justify-between items-center bg-white/40 backdrop-blur-md">
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white shadow-md">
                        <i class="ph ph-robot text-lg"></i>
                    </div>
                    <div>
                        <h2 class="text-sm font-bold text-slate-800 leading-none">JOSH.AI</h2>
                        <span class="text-[10px] font-mono text-slate-500 opacity-80">V1.1 (LIGHT)</span>
                    </div>
                </div>
                <button onclick="clearChat()" class="p-2 rounded-lg hover:bg-rose-50 text-slate-400 hover:text-rose-500 transition border border-transparent hover:border-rose-100">
                    <i class="ph ph-trash text-lg"></i>
                </button>
            </div>

            <div id="chatHistory" class="flex-grow overflow-y-auto p-6 space-y-6 custom-scroll">
                <div class="flex justify-start animate-float">
                    <div class="max-w-[85%] md:max-w-[70%]">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-xs font-mono text-indigo-600">josh.ai</span>
                            <span class="text-[10px] text-slate-400">NU</span>
                        </div>
                        <div class="bg-white/80 border border-indigo-100 text-indigo-900 p-4 rounded-2xl rounded-tl-sm shadow-sm backdrop-blur-sm">
                            <p>yo bro wat wil je</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="p-4 bg-white/60 backdrop-blur-xl border-t border-slate-200/50">
                <form id="chatForm" class="relative flex items-center gap-3">
                    <input 
                        type="text" 
                        id="userInput" 
                        placeholder="vraag iets..." 
                        autocomplete="off"
                        class="w-full bg-white/80 text-slate-800 placeholder-slate-400 border border-slate-200 rounded-xl px-5 py-4 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 focus:bg-white transition-all font-mono text-sm shadow-sm"
                        required
                    >
                    <button 
                        type="submit" 
                        id="sendButton"
                        class="absolute right-2 p-2.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-all shadow-lg shadow-indigo-500/20 disabled:opacity-50 disabled:cursor-not-allowed group"
                    >
                        <i id="sendIcon" class="ph ph-arrow-right text-xl group-hover:translate-x-1 transition-transform"></i>
                        <svg id="loadingIcon" class="w-5 h-5 animate-spin hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                    </button>
                </form>
            </div>
        </section>

                <section class="h-auto shrink-0 pb-6">
            <div class="flex items-center justify-between mb-4 px-2">
                <h2 class="text-xs font-mono text-slate-500 uppercase tracking-widest font-bold flex items-center gap-2">
                    <i class="ph ph-squares-four"></i> Belangrijkste Projecten
                </h2>
                <div class="h-[1px] flex-grow bg-gradient-to-r from-slate-300 to-transparent ml-4 opacity-50"></div>
            </div>
            
             <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 gap-4 h-64">
                
                <a href="appelsap.html" class="glass-card p-6 rounded-2xl flex items-center gap-4 group relative overflow-hidden">
                    <div class="flex-grow z-10">
                        <h3 class="font-bold text-slate-800 text-base group-hover:text-indigo-600 transition-colors">Appelsap: 3D Platformer</h3>
                        <p class="text-sm text-slate-500">De beste appelsap 3D platformer game ooit gemaakt. Klik om te spelen!</p>
                    </div>
                    <div class="text-slate-300 group-hover:text-indigo-500 group-hover:translate-x-0 -translate-x-4 opacity-0 group-hover:opacity-100 transition-all duration-300">
                        <i class="ph ph-arrow-right text-xl"></i>
                    </div>
                </a>

            </div>
        </section>

    </main>

    <script>
        const API_KEY = 'AIzaSyARU6mcBq7EBxCP-ECgDHVEuzY4KAw5dds'; 

        const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${API_KEY}`;
        
        const chatHistoryDiv = document.getElementById('chatHistory');
        const chatForm = document.getElementById('chatForm');
        const userInput = document.getElementById('userInput');
        const sendButton = document.getElementById('sendButton');
        const sendIcon = document.getElementById('sendIcon');
        const loadingIcon = document.getElementById('loadingIcon');

        let chatHistory = [];
        let isLoading = false;

        const escapeHtml = (str) => {
            if (!str) return '';
            return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/'/g, '&#039;');
        };

        const formatText = (text) => {
            let formatted = escapeHtml(text).replace(/\n/g, '<br>');
            formatted = formatted.replace(/\*\*(.*?)\*\*/g, '<b class="text-indigo-600">$1</b>');
            formatted = formatted.replace(/`(.*?)`/g, '<code class="bg-slate-100 border border-slate-200 px-1 py-0.5 rounded text-xs font-mono text-pink-600">$1</code>');
            return formatted;
        };

        const appendMessage = (role, text) => {
            const messageDiv = document.createElement('div');
            messageDiv.className = role === 'user' ? 'flex justify-end' : 'flex justify-start';
            
            const wrapper = document.createElement('div');
            wrapper.className = 'max-w-[85%] md:max-w-[70%] animate-[fadeIn_0.3s_ease-out]';
            
            const meta = document.createElement('div');
            meta.className = `flex items-center gap-2 mb-1 ${role === 'user' ? 'justify-end' : ''}`;
            meta.innerHTML = role === 'user' 
                ? `<span class="text-[10px] text-slate-400">JIJ</span>` 
                : `<span class="text-xs font-mono text-indigo-600">josh.ai 1.1</span>`;
            wrapper.appendChild(meta);

            const bubble = document.createElement('div');
            bubble.className = role === 'user'
                ? 'bg-indigo-600 text-white p-4 rounded-2xl rounded-tr-sm shadow-lg shadow-indigo-500/20'
                : 'bg-white border border-slate-200 text-slate-800 p-4 rounded-2xl rounded-tl-sm shadow-sm';

            const contentP = document.createElement('div');
            contentP.className = 'text-sm leading-relaxed';
            contentP.innerHTML = formatText(text);
            bubble.appendChild(contentP);

            wrapper.appendChild(bubble);
            messageDiv.appendChild(wrapper);
            chatHistoryDiv.appendChild(messageDiv);
            chatHistoryDiv.scrollTop = chatHistoryDiv.scrollHeight;
        };

        const setLoading = (loading) => {
            isLoading = loading;
            userInput.disabled = loading;
            sendButton.disabled = loading;
            if (loading) {
                sendIcon.classList.add('hidden');
                loadingIcon.classList.remove('hidden');
            } else {
                loadingIcon.classList.add('hidden');
                sendIcon.classList.remove('hidden');
                userInput.focus();
            }
        };

        const callGemini = async (userMessage) => {
            setLoading(true);
            
            const contents = chatHistory.map(msg => ({ role: msg.role, parts: [{ text: msg.text }] }));
            contents.push({ role: 'user', parts: [{ text: userMessage }] });

            const payload = {
                contents: contents,
                systemInstruction: {
                    parts: [{ text: "je bent Josh.ai, een futuristisch AI systeem in een dashboard. spreek nederlands. wees kort, cool en soms een beetje sarcastisch. je doel is de gebruiker efficiënt te helpen. Bij vragen waarbij je moet rekenen gebruik je normale tekst en tekens, niet bijvoorbeeld \frac" }]
                }
            };

            try {
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const data = await response.json();
                if (!response.ok) throw new Error(data.error?.message || 'API Error');
                
                const aiText = data.candidates?.[0]?.content?.parts?.[0]?.text;
                
                if (aiText) {
                    chatHistory.push({ role: 'user', text: userMessage });
                    chatHistory.push({ role: 'model', text: aiText });
                    appendMessage('model', aiText);
                }

            } catch (error) {
                console.error(error);
                appendMessage('model', 'Systeemfout. Check je verbinding of key. [Error: 500]');
            } finally {
                setLoading(false);
            }
        };

        chatForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const text = userInput.value.trim();
            if (!text || isLoading) return;
            appendMessage('user', text);
            userInput.value = '';
            callGemini(text);
        });

        function clearChat() {
            chatHistory = [];
            chatHistoryDiv.innerHTML = `
                <div class="flex justify-start animate-float">
                    <div class="max-w-[85%] md:max-w-[70%]">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-xs font-mono text-indigo-600">JOSH.AI</span>
                            <span class="text-[10px] text-slate-400">NU</span>
                        </div>
                        <div class="bg-white/80 border border-indigo-100 text-indigo-900 p-4 rounded-2xl rounded-tl-sm shadow-sm backdrop-blur-sm">
                            <p>Geheugen gewist.</p>
                        </div>
                    </div>
                </div>`;
        }
    </script>
</body>
</html>
